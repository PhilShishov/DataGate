@using DataGate.Common
@model DataGate.Web.ViewModels.Entities.SpecificEntityViewModel
@{
    var controllerName = this.ViewContext.RouteData.Values[GlobalConstants.ControllerRouteDataValue].ToString();
    var targetRoute = string.Empty;
    var targetRouteContainer = string.Empty;
    var containerName = string.Empty;
    var documentTypeName = string.Empty;
    var entityName = string.Empty;
    var routeName = string.Empty;
    var routeSEName = string.Empty;

    if (controllerName == GlobalConstants.FundDetailsControllerName)
    {
        documentTypeName = GlobalConstants.UploadTypeProspectusDisplay;
        entityName = GlobalConstants.FundNameDisplay;
        targetRoute = "f";
        routeName = GlobalConstants.AllFundsRouteName;
        //routeSEName;
    }
    //else if (controllerName == GlobalConstants.SubFundSubEntitiesControllerName)
    //{
    //    containerName = GlobalConstants.ContainerFundName;
    //    targetRouteContainer = "f";
    //    documentTypeName = GlobalConstants.UploadTypeDocumentDisplay;
    //    entityName = GlobalConstants.SubFundNameDisplay;
    //    targetRoute = "sf";
    //    routeName = GlobalConstants.AllSubFundsRouteName;
    //    routeSEName = GlobalConstants.SubFundSubEntititesRouteName;
    //}
    //else if (controllerName == GlobalConstants.ShareClassesSubEntitiesControllerName)
    //{
    //    containerName = GlobalConstants.ContainerSubFundName;
    //    targetRouteContainer = "sf";
    //    documentTypeName = GlobalConstants.UploadTypeDocumentDisplay;
    //    entityName = GlobalConstants.ShareClassNameDisplay;
    //    targetRoute = "sc";
    //    routeName = GlobalConstants.AllShareClassesRouteName;
    //    routeSEName = GlobalConstants.ShareClassSubEntititesRouteName;
    //}
}

<div class="w-100 mb-3" id="toolbar-pharus">

    @if (controllerName == GlobalConstants.FundDetailsControllerName)
    {
        <div class="d-flex mt-1 mr-auto"></div>
    }
    else
    {
        <div class="d-flex mt-1 mr-auto">
            <p>@containerName CONTAINER: </p>
            <a href="/@targetRouteContainer/@Model.ContainerId/@Model.Date"
               class="text-torshia font-weight-bold ml-1">
                @Model.Container
            </a>
        </div>
    }

    <div class="d-flex mr-auto">
        <div>
            <input type="date"
                   id="date-pharus"
                   asp-for="Date"
                   min="2018-01-01">

            <input type="submit"
                   class="btn btn-primary btn-sm"
                   asp-for="Command"
                   asp-action="UpdateEntity"
                   value="Update Table"
                   style="margin-bottom: 2%"></>
        </div>
        <div class="mx-2">
            <a asp-route="@routeName"
               class="btn btn-primary btn-sm mb-2">
                Back to All
            </a>
        </div>
        <div>
            <button type="button"
                    class="btn btn-primary btn-sm mb-2"
                    id="btn-upload-document"
                    data-toggle="modal"
                    data-target="#upDocModal">
                Upload @documentTypeName
            </button>
        </div>
        <div class="mx-2">
            <button type="button"
                    id="btn-upload-agreement"
                    class="btn btn-primary btn-sm mb-2"
                    data-toggle="modal"
                    data-target="#upAgrModal">
                Upload Agreement
            </button>
        </div>

        @if (this.User.IsInRole(GlobalConstants.AdministratorRoleName))
        {
            <div>
                <a href="/@targetRoute/@Model.Id/@Model.Date"
                   class="btn btn-primary btn-sm mb-2">
                    Edit @entityName
                </a>
            </div>
        }
        <input type="text"
               asp-for="Id"
               hidden>
    </div>
</div>